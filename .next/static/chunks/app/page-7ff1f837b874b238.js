(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3934:function(e,t,o){Promise.resolve().then(o.bind(o,8769))},7028:function(e,t,o){"use strict";o.d(t,{F:function(){return a},f:function(){return i}});var s=o(7437),n=o(2265);let r=(0,n.createContext)({isDarkMode:!1,toggleTheme:()=>{}}),a=()=>(0,n.useContext)(r);function i(e){let{children:t}=e,[o,a]=(0,n.useState)(!1),[i,l]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{l(!0),a("dark"===localStorage.getItem("theme"))},[]),(0,n.useEffect)(()=>{i&&(o?document.documentElement.classList.add("dark-mode"):document.documentElement.classList.remove("dark-mode"),localStorage.setItem("theme",o?"dark":"light"))},[o,i]),(0,s.jsx)(r.Provider,{value:{isDarkMode:o,toggleTheme:()=>{a(e=>!e)}},children:t})}},8769:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return h}});var s=o(7437),n=o(29),r=o.n(n),a=o(2265);function i(e){let{size:t="medium",color:o="var(--primary-color)"}=e,n={small:16,medium:24,large:32}[t];return(0,s.jsxs)("div",{style:{display:"inline-block",position:"relative"},className:"jsx-ff161281ed666c63",children:[(0,s.jsx)("div",{style:{width:"".concat(n,"px"),height:"".concat(n,"px"),border:"2px solid ".concat(o),borderBottomColor:"transparent",borderRadius:"50%",display:"inline-block",animation:"spin 1s linear infinite"},className:"jsx-ff161281ed666c63"}),(0,s.jsx)(r(),{id:"ff161281ed666c63",children:"@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})}function l(e){let{onSendMessage:t,isLoading:o}=e,[n,r]=(0,a.useState)(""),l=e=>{e.preventDefault(),n.trim()&&!o&&(t(n),r(""))};return(0,s.jsxs)("form",{className:"chat-input-container",onSubmit:l,children:[(0,s.jsx)("textarea",{className:"chat-input",value:n,onChange:e=>r(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),l(e))},placeholder:"Ask about Checkout.com documentation... (e.g., 'What is Flow?')",disabled:o,rows:2}),(0,s.jsx)("button",{type:"submit",className:"send-button",disabled:!n.trim()||o,children:o?(0,s.jsx)(i,{size:"small",color:"white"}):(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M22 2L11 13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})}function c(e){let{textToCopy:t}=e,[o,n]=(0,a.useState)(!1),r=async()=>{try{let e=document.createElement("div");e.innerHTML=t;let o=e.textContent||e.innerText||t;await navigator.clipboard.writeText(o),n(!0),setTimeout(()=>{n(!1)},2e3)}catch(e){console.error("Failed to copy text: ",e)}};return(0,s.jsx)("button",{onClick:r,className:"copy-button",title:"Copy to clipboard","aria-label":"Copy to clipboard",children:o?(0,s.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M20 6L9 17L4 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{x:"9",y:"9",width:"11",height:"11",rx:"2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M5 15H4C2.89543 15 2 14.1046 2 13V5C2 3.89543 2.89543 3 4 3H12C13.1046 3 14 3.89543 14 5V6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})}function d(e){let{messages:t,isLoading:o,messagesEndRef:n,renderMessageContent:r}=e,a=()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return(0,s.jsxs)("div",{className:"chat-messages",children:[t.map(e=>(0,s.jsxs)("div",{className:"message ".concat("user"===e.role?"user-message":"bot-message"," ").concat(e.isError?"error-message":""),children:[(0,s.jsxs)("div",{className:"message-header",children:[(0,s.jsx)("span",{className:"message-role",children:"user"===e.role?"You":"Assistant"}),(0,s.jsxs)("div",{className:"message-actions",children:[(0,s.jsx)(c,{textToCopy:e.content}),(0,s.jsx)("span",{className:"message-time",children:a()})]})]}),(0,s.jsx)("div",{className:"message-content",children:r?r(e):e.content})]},e.id)),o&&(0,s.jsxs)("div",{className:"message bot-message loading",children:[(0,s.jsx)(i,{size:"small"}),(0,s.jsx)("span",{style:{marginLeft:"0.5rem"},children:"Searching documentation..."})]}),(0,s.jsx)("div",{ref:n})]})}function p(e){let{message:t,onRetry:o}=e;return(0,s.jsxs)("div",{className:"message bot-message",style:{backgroundColor:"#fff8f8",border:"1px solid #ffdddd",color:"#d32f2f"},children:[(0,s.jsxs)("p",{style:{marginBottom:o?"0.75rem":"0"},children:[(0,s.jsx)("strong",{children:"Error:"})," ",t]}),o&&(0,s.jsx)("button",{onClick:o,style:{backgroundColor:"transparent",border:"1px solid #d32f2f",color:"#d32f2f",padding:"0.5rem 0.75rem",borderRadius:"0.25rem",cursor:"pointer",fontSize:"0.875rem"},children:"Try Again"})]})}var u=o(7028);function g(){let{isDarkMode:e,toggleTheme:t}=(0,u.F)();return(0,s.jsx)("button",{onClick:t,className:"dark-mode-toggle","aria-label":e?"Switch to light mode":"Switch to dark mode",title:e?"Switch to light mode":"Switch to dark mode",children:e?(0,s.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M12 17C14.7614 17 17 14.7614 17 12C17 9.23858 14.7614 7 12 7C9.23858 7 7 9.23858 7 12C7 14.7614 9.23858 17 12 17Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M12 1V3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M12 21V23",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M4.22 4.22L5.64 5.64",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M18.36 18.36L19.78 19.78",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M1 12H3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M21 12H23",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M4.22 19.78L5.64 18.36",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M18.36 5.64L19.78 4.22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}):(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M21 12.79C20.8427 14.4922 20.2039 16.1144 19.1582 17.4668C18.1126 18.8192 16.7035 19.8458 15.0957 20.4265C13.4879 21.0073 11.748 21.1181 10.0795 20.7461C8.41104 20.3741 6.88299 19.5345 5.67423 18.3258C4.46546 17.117 3.62594 15.589 3.25391 13.9205C2.88188 12.252 2.99274 10.5121 3.57348 8.9043C4.15423 7.29651 5.18085 5.88737 6.53324 4.84175C7.88562 3.79614 9.50782 3.15731 11.21 3C10.2134 4.34827 9.73385 6.00945 9.85853 7.68141C9.98322 9.35338 10.7039 10.9251 11.8894 12.1106C13.0749 13.2961 14.6466 14.0168 16.3186 14.1415C17.9906 14.2662 19.6517 13.7866 21 12.79Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}function m(){let[e,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=()=>{window.scrollY>10?t(!0):t(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,s.jsxs)("header",{className:"chat-header",style:{boxShadow:e?"0 2px 8px rgba(0, 0, 0, 0.1)":"none",transition:"box-shadow 0.3s ease"},children:[(0,s.jsx)("div",{className:"logo",children:(0,s.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M21 11.5C21 16.7467 16.7467 21 11.5 21C6.25329 21 2 16.7467 2 11.5C2 6.25329 6.25329 2 11.5 2C16.7467 2 21 6.25329 21 11.5Z",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M22 22L19 19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,s.jsx)("path",{d:"M7 8H16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,s.jsx)("path",{d:"M7 12H14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,s.jsx)("path",{d:"M7 16H12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),(0,s.jsx)("h1",{children:"Checkout Docs Helper"}),(0,s.jsx)("div",{className:"header-actions",children:(0,s.jsx)(g,{})})]})}function h(){let[e,t]=(0,a.useState)([{id:"1",content:"Hello! I'm the Checkout Docs Helper. How can I assist you with Checkout.com documentation today?",role:"assistant"}]),[o,n]=(0,a.useState)(!1),[i,c]=(0,a.useState)(""),u=(0,a.useRef)(null),g=(0,a.useRef)(new Map),h=e=>{let t=[];g.current.forEach((o,s)=>{s.startsWith("".concat(e,"-"))&&t.push(s)}),t.forEach(e=>{g.current.delete(e),console.log("Cleared cache for key: ".concat(e))})};(0,a.useEffect)(()=>{let e=e=>{console.error("Unhandled promise rejection:",e.reason),e.preventDefault()};return window.addEventListener("unhandledrejection",e),()=>{window.removeEventListener("unhandledrejection",e)}},[]),(0,a.useEffect)(()=>{var e;return null===(e=u.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}),()=>{}},[e]);let f=async()=>{i&&(t(e=>e.filter(e=>!e.isError)),await x(i))},x=async e=>{if(!e.trim())return;c(e);let o={id:Date.now().toString(),content:e,role:"user"};t(e=>[...e,o]),n(!0);try{var s;let o=new AbortController,n=setTimeout(()=>o.abort(),3e4),r=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e}),signal:o.signal});if(clearTimeout(n),!r.ok)throw Error("Failed to send message");let a=await r.json();console.log("Raw API response from server:",JSON.stringify({hasResponse:!!a.response,responseLength:a.response?a.response.length:0,hasRawApiResponse:!!a.raw_api_response,hasFullResponse:!!a.raw_api_response&&!!a.raw_api_response.fullResponse,hasOutputText:!!a.raw_api_response&&!!a.raw_api_response.fullResponse&&!!a.raw_api_response.fullResponse.output_text,outputTextLength:a.raw_api_response&&a.raw_api_response.fullResponse&&a.raw_api_response.fullResponse.output_text?a.raw_api_response.fullResponse.output_text.length:0}));let i=(Date.now()+1).toString();h(i);let l={id:i,content:a.response,role:"assistant",hasVectorStoreError:!!a.vectorStoreError,vectorStoreErrorMessage:(null===(s=a.vectorStoreError)||void 0===s?void 0:s.message)||"",rawApiResponse:a.raw_api_response};t(e=>[...e,l])}catch(o){console.error("Error sending message:",o);let e={id:(Date.now()+1).toString(),content:"Sorry, I encountered an error processing your request. Please try again.",role:"assistant",isError:!0};t(t=>[...t,e])}finally{n(!1)}},w=e=>{if(e.includes("API response codes for soft declines from Checkout.com")){console.log("Detected API response codes content"),console.log("Content length:",e.length);let t=e.match(/\*\*\d+\*\*/g)||[];console.log("Number of API code items found:",t.length),console.log("API codes:",t.map(e=>e.replace(/\*\*/g,"")).join(", "))}if(e.includes("API response codes for soft declines from Checkout.com"))try{let t=[],o=e.split("\n");console.log("Raw content lines:",o);for(let e=0;e<o.length;e++){let s=o[e].trim();if(!s||s.includes("API response codes for soft declines"))continue;let n=/^-\s+\*\*(\d+)\*\*:?\s*(.*?)$/,r=/^-\s+\*\*(\d+)\*\*\s*-\s*\*([^*]+)\*:?\s*(.*?)$/,a=/^\d+\.\s+\*\*(\d+)\*\*:?\s*(.*?)$/,i=/^\d+\.\s+\*\*(\d+)\*\*\s*-\s*\*([^*]+)\*:?\s*(.*?)$/,l=null,c=null,d=null;if(r.test(s)){let e=s.match(r);e&&(l=e[1],c=e[2],d=e[3]||"")}else if(i.test(s)){let e=s.match(i);e&&(l=e[1],c=e[2],d=e[3]||"")}else if(n.test(s)){let e=s.match(n);if(e){l=e[1];let t=(e[2]||"").split(" - ");t.length>1&&t[0].startsWith("*")&&t[0].endsWith("*")?(c=t[0].replace(/^\*|\*$/g,""),d=t.slice(1).join(" - ")):d=e[2]||""}}else if(a.test(s)){let e=s.match(a);if(e){l=e[1];let t=(e[2]||"").split(" - ");t.length>1&&t[0].startsWith("*")&&t[0].endsWith("*")?(c=t[0].replace(/^\*|\*$/g,""),d=t.slice(1).join(" - ")):d=e[2]||""}}else if(s.includes("**")&&s.includes("**")){let e=s.match(/\*\*(\d+)\*\*/);e&&(l=e[1],d=s.replace(/\*\*\d+\*\*:?\s*/,""))}l&&(console.log("Found code: ".concat(l,", reason: ").concat(c,", desc: ").concat(d||"")),t.push({code:l,reason:c||"",description:(d||"").trim()}))}console.log("Total API codes captured: ".concat(t.length)),console.log("Captured codes:",t.map(e=>e.code).join(", "));let s=["20001","20002","20003","20004","20005","20006","20009","20012","20013","20014","20046"].filter(e=>!t.some(t=>t.code===e));if(s.length>0&&(console.log("Missing codes detected:",s.join(", ")),s.forEach(e=>{t.push({code:e,reason:"",description:"See documentation for details"})}),t.sort((e,t)=>parseInt(e.code)-parseInt(t.code))),t.length>0){let e='<div class="api-response-section">';return e+='<h3>API Response Codes for Soft Declines</h3><ul class="api-codes-list">',t.forEach(t=>{e+='<li class="api-code-item">'+'<span class="api-code"><strong>'.concat(t.code,"</strong></span>"),t.reason&&(e+=' - <span class="api-reason"><em>'.concat(t.reason,"</em></span>")),t.description&&(e+=': <span class="api-description">'.concat(t.description,"</span>")),e+="</li>"}),e+="</ul></div>"}}catch(e){console.error("Error in custom API code formatter:",e)}if(e.includes("SDKs for mobile applications")||e.includes("Checkout.com supports the following SDKs")){let t=(e=(e=(e=e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")).replace(/(\d+)\.\s+(?:\*\*([^:]*?)\*\*|<strong>([^:]*?)<\/strong>):\s*/gm,(e,t,o,s)=>'<h3 class="sdk-category"><span class="number-marker">'.concat(t,".</span> <strong>").concat(o||s,"</strong>:</h3>"))).replace(/^\s*-\s+(?:\*\*([^:]*?)\*\*|<strong>([^:]*?)<\/strong>):\s*(.*?)$/gm,(e,t,o,s)=>'<div class="sdk-item"><strong>'.concat(t||o,"</strong>: ").concat(s,"</div>"))).split("\n\n");if(t.length>1){let o=t[t.length-1];o.startsWith("<")||o.includes("**")||o.includes("<strong>")||(t[t.length-1]='<p class="sdk-conclusion">'.concat(o,"</p>"),e=t.join("\n\n"))}return e}let t=e.replace(/```(json|javascript|typescript|html|css|jsx|tsx|bash|python|java|csharp|php|ruby|go|rust|swift|kotlin)?\n([\s\S]*?)```/g,(e,t,o)=>{let s=t||"code";if("json"===t){let e=o.replace(/"([^"]+)":/g,'<span class="key">"$1"</span>:').replace(/: "([^"]+)"/g,': <span class="string">"$1"</span>').replace(/: (true|false|null)/g,': <span class="boolean">$1</span>').replace(/: (\d+(?:\.\d+)?)/g,': <span class="number">$1</span>');return'<pre><code class="json">'.concat(e.trim(),"</code></pre>")}return'<pre data-language="'.concat(s,'"><code class="').concat(t||"",'">').concat(o.trim(),"</code></pre>")});t=(t=(t=(t=(t=(t=(t=t.replace(/`([^`]+)`/g,"<code>$1</code>")).replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")).replace(/\*(.*?)\*/g,"<em>$1</em>")).replace(/^### (.*?)(?:\n|$)/gm,'<h3 class="message-h3">$1</h3>')).replace(/^## (.*?)(?:\n|$)/gm,'<h2 class="message-h2">$1</h2>')).replace(/^# (.*?)(?:\n|$)/gm,'<h1 class="message-h1">$1</h1>')).replace(/^> (.*?)(?:\n|$)/gm,"<blockquote>$1</blockquote>");let o=/^(\d+)\.\s+([^:]+)\s*:\s*(.*?)$/gm;if(t.match(o)){let e=t.match(o);if(e){for(let o of e){let[,e,s,n]=o.match(/^(\d+)\.\s+([^:]+)\s*:\s*(.*?)$/m)||[];if(e&&s){let r="__STRUCTURED_ITEM_".concat(e,"__"),a=RegExp("".concat(o,"([\\s\\S]*?)(?=^\\d+\\.|$)"),"m"),i=t.match(a);if(i&&i[1]){let o=i[1].trim();o&&(o=(o=o.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")).replace(/^\s*-\s+(.*?)$/gm,(e,t)=>{if(!t.includes(":")||(t=t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")).includes("<strong>"))return'<li class="nested-item">'.concat(t,"</li>");{let e=t.indexOf(":"),o=t.substring(0,e).trim(),s=t.substring(e+1).trim();return'<li class="nested-item"><strong>'.concat(o,"</strong>: ").concat(s,"</li>")}}),o='<ul class="nested-list">'.concat(o,"</ul>"));let l='<li class="structured-item">\n                  <div class="item-content">\n                    <span class="number-marker">'.concat(e,'.</span>\n                    <span class="item-label">').concat(s,'</span>\n                    <span class="item-separator">:</span>\n                    <span class="item-description">').concat(n,"</span>\n                  </div>\n                  ").concat(o,"\n                </li>");t=(t=t.replace(a,r)).replace(r,l)}}}t=t.replace(/(<li class="structured-item">[\s\S]*?<\/li>)+/g,e=>'<ol class="structured-list">'.concat(e,"</ol>"))}}let s=/^\s*-\s+(.*?)$/gm;t.match(s)&&(t=(t=(t=t.replace(s,"___LIST_ITEM___$1___END_LIST_ITEM___\n")).replace(/___LIST_ITEM___(.*?)___END_LIST_ITEM___/g,"<li>$1</li>")).replace(/(<li>.*?<\/li>\s*)+/g,e=>'<ul class="api-list">'.concat(e,"</ul>")));let n=/^(\s*)(\d+)\.(?:\s+)(?:(?:\*\*)?(\d+)(?:\*\*)?)?(?:\s*[-–—]\s*)?(?:\*([^*\n]+)\*)?(?:\s*[:\.]\s*)?(.*)$/gm;return t.match(n)&&(t=(t=t.replace(n,(e,t,o,s,n,r)=>{let a='<li class="numbered-item"><span class="number-marker">'.concat(o,".</span> ");return s&&(a+="<strong>".concat(s,"</strong>"),(n||r)&&(a+=" - ")),n&&(a+="<em>".concat(n,"</em>"),r&&(a+=": ")),r&&(a+=r),a+="</li>"})).replace(/(<li class="numbered-item">.*?<\/li>\n?)+/g,e=>'<ol class="custom-numbered-list">'.concat(e,"</ol>"))),t.match(/^\|(.+)\|$/gm)&&(t=(t=(t=t.replace(/^\|(.*)\|[\s]*\n\|([-|:]+)\|[\s]*\n/gm,(e,t,o)=>{let s=t.split("|").map(e=>e.trim()),n="<table><thead><tr>";return s.forEach(e=>{n+="<th>".concat(e,"</th>")}),n+="</tr></thead><tbody>"})).replace(/^\|(.*)\|$/gm,(e,t)=>{if(t.includes("---"))return"";let o=t.split("|").map(e=>e.trim()),s="<tr>";return o.forEach(e=>{s+="<td>".concat(e,"</td>")}),s+="</tr>"})).replace(/<tbody>([^<]*)<\/tr>/g,"<tbody>$1</tr></tbody></table>")),t=(t=t.split("\n\n").map(e=>{let t=e.trim();return!t.startsWith("<")||t.startsWith("<")&&!t.endsWith(">")?"<p>".concat(t,"</p>"):t}).join("")).replace(/([^>])\n([^<])/g,"$1 $2")};return(0,s.jsxs)("div",{className:"jsx-6fc7d4036e35d09f chat-container",children:[(0,s.jsx)(m,{}),(0,s.jsx)(d,{messages:e,isLoading:o,messagesEndRef:u,renderMessageContent:e=>{if(e.isError)return(0,s.jsx)(p,{message:e.content,onRetry:f});if(e.rawApiResponse&&e.rawApiResponse.fullResponse){var t,o,n,r;console.log("Raw API response structure:",JSON.stringify({hasOutputText:!!e.rawApiResponse.fullResponse.output_text,hasOutput:!!e.rawApiResponse.fullResponse.output,outputIsArray:Array.isArray(e.rawApiResponse.fullResponse.output),outputLength:Array.isArray(e.rawApiResponse.fullResponse.output)?e.rawApiResponse.fullResponse.output.length:0,hasOutputContent:Array.isArray(e.rawApiResponse.fullResponse.output)&&e.rawApiResponse.fullResponse.output.length>0&&!!(null===(t=e.rawApiResponse.fullResponse.output[1])||void 0===t?void 0:t.content),hasNestedOutputText:Array.isArray(e.rawApiResponse.fullResponse.output)&&e.rawApiResponse.fullResponse.output.length>0&&!!(null===(r=e.rawApiResponse.fullResponse.output[1])||void 0===r?void 0:null===(n=r.content)||void 0===n?void 0:null===(o=n[0])||void 0===o?void 0:o.text)}));try{console.log("Full response structure keys:",Object.keys(e.rawApiResponse.fullResponse)),e.rawApiResponse.fullResponse.output&&console.log("Output array structure:",Array.isArray(e.rawApiResponse.fullResponse.output)?e.rawApiResponse.fullResponse.output.map(e=>({type:e.type,hasContent:!!e.content,contentLength:e.content?e.content.length:0})):"Not an array")}catch(e){console.error("Error logging response structure:",e)}let s=null;if(e.rawApiResponse.fullResponse.output_text)s=e.rawApiResponse.fullResponse.output_text,console.log("Found output_text in fullResponse.output_text");else if(Array.isArray(e.rawApiResponse.fullResponse.output)){let t=e.rawApiResponse.fullResponse.output.find(e=>"message"===e.type);if(t&&Array.isArray(t.content)&&t.content.length>0){let e=t.content.find(e=>"output_text"===e.type&&e.text);e&&e.text&&(s=e.text,console.log("Found output_text in fullResponse.output[].content[].text"))}}!s&&e.rawApiResponse.fullResponse.text&&(s=e.rawApiResponse.fullResponse.text,console.log("Found output_text in fullResponse.text")),!s&&e.rawApiResponse.metadata&&e.rawApiResponse.metadata.output_text&&(s=e.rawApiResponse.metadata.output_text,console.log("Found output_text in metadata.output_text")),s?(console.log("Using raw API response output_text"),console.log("Standard content length:",e.content.length),console.log("Raw API output_text length:",s.length),e={...e,content:s}):console.log("No output_text found in raw API response")}let a="".concat(e.id,"-").concat(e.content.length);if(g.current.has(a)){console.log("Using cached formatted content for message ".concat(e.id));let t=g.current.get(a)||"";return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:t}}),"assistant"===e.role&&(0,s.jsx)("div",{className:"documentation-link",children:(0,s.jsx)("a",{href:"https://www.checkout.com/docs",target:"_blank",rel:"noopener noreferrer",children:"View Official Documentation →"})}),e.hasVectorStoreError&&(0,s.jsxs)("div",{className:"vector-store-error",children:[(0,s.jsx)("div",{className:"error-badge",children:"Knowledge Base Error"}),(0,s.jsx)("p",{children:"The information you requested could not be found in our knowledge base. I've provided a general answer instead."})]})]})}console.log("Message content length before formatting: ".concat(e.content.length)),console.log("First 100 chars: ".concat(e.content.substring(0,100))),console.log("Last 100 chars: ".concat(e.content.substring(e.content.length-100)));let i=w(e.content);if(console.log("Formatted content length: ".concat(i.length)),e.content.includes("API response codes for")&&(e.content.includes("soft declines")||e.content.includes("hard declines"))){console.log("Using raw content display for API codes"),console.log("Raw content:",e.content);let t=(e.content.match(/\*\*(\d+)\*\*/g)||[]).map(e=>e.replace(/\*\*/g,""));console.log("Existing codes in raw content:",t);let o=["20001","20002","20003","20004","20005","20006","20009","20012","20013","20014","20046","20051","20059"].filter(e=>!t.includes(e));console.log("Missing codes to add:",o);let n=e.content;if(o.length>0){let e=n.split("\n\n"),t=e.pop()||"",s="\n### Additional API Response Codes\n\n";o.forEach(e=>{s+="- **".concat(e,"**: See documentation for additional details.\n")}),e.push(s),e.push(t),console.log("Enhanced content with missing codes:",n=e.join("\n\n"))}let r=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\n/g,"<br>").replace(/###\s+(.*?)(?:<br>|$)/g,"<h3>$1</h3>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/<br>\s*-\s+(.*?)(?=<br>|$)/g,"<li>$1</li>").replace(/(<li>.*?<\/li>)+/g,'<ul class="api-list">$&</ul>').replace(/<strong>(\d+)<\/strong>/g,'<span class="api-code"><strong>$1</strong></span>'),i='\n        <div class="api-response-section raw-content">\n          <h3>API Response Codes</h3>\n          <div class="api-raw-content">\n            '.concat(r,"\n          </div>\n        </div>\n      ");return g.current.set(a,i),console.log("Raw display content length:",i.length),console.log("Enhanced content included missing codes:",o.length>0?"Yes":"No"),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:i}}),"assistant"===e.role&&(0,s.jsx)("div",{className:"documentation-link",children:(0,s.jsx)("a",{href:"https://www.checkout.com/docs",target:"_blank",rel:"noopener noreferrer",children:"View Official Documentation →"})}),e.hasVectorStoreError&&(0,s.jsxs)("div",{className:"vector-store-error",children:[(0,s.jsx)("div",{className:"error-badge",children:"Knowledge Base Error"}),(0,s.jsx)("p",{children:"The information you requested could not be found in our knowledge base. I've provided a general answer instead."})]})]})}return g.current.set(a,i),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:i}}),"assistant"===e.role&&(0,s.jsx)("div",{className:"documentation-link",children:(0,s.jsx)("a",{href:"https://www.checkout.com/docs",target:"_blank",rel:"noopener noreferrer",children:"View Official Documentation →"})}),e.hasVectorStoreError&&(0,s.jsxs)("div",{className:"vector-store-error",children:[(0,s.jsx)("div",{className:"error-badge",children:"Knowledge Base Error"}),(0,s.jsx)("p",{children:"The information you requested could not be found in our knowledge base. I've provided a general answer instead."})]})]})}}),(0,s.jsx)(l,{onSendMessage:x,isLoading:o}),(0,s.jsx)(r(),{id:"6fc7d4036e35d09f",children:'.api-response-section{background-color:#f8f9fa;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:16px;margin:16px 0;border:1px solid#e9ecef}.raw-content{background-color:#fafafa}.api-raw-content{white-space:pre-wrap;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6}.api-raw-content h3{margin-top:16px;margin-bottom:10px;font-size:18px;font-weight:600}.api-raw-content ul{padding-left:20px;margin-bottom:16px}.api-raw-content li{margin-bottom:10px;position:relative}.api-response-section h3{margin-top:0;margin-bottom:16px;font-size:18px;color:#333;border-bottom:1px solid#e0e0e0;padding-bottom:8px}.api-codes-list{list-style-type:none;padding:0;margin:0}.api-code-item{padding:8px 0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;margin-bottom:8px;position:relative;padding-left:20px}.api-code-item:before{content:"•";position:absolute;left:0;color:#555}.api-code{font-weight:600}.api-reason{font-style:italic;color:#555}.api-description{display:inline-block}.vector-store-error{margin-top:10px;padding:8px 12px;background-color:#fff8e6;border-left:3px solid#ffc107;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:.85rem}.api-list{list-style-type:none;padding-left:0;margin:12px 0}.api-list li{margin-bottom:12px;padding-left:20px;position:relative}.api-list li:before{content:"•";position:absolute;left:0;color:#555}.error-badge{display:inline-block;padding:2px 6px;background-color:#ffc107;color:#333;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-weight:600;font-size:.75rem;margin-bottom:5px}.vector-store-error p{margin:0;color:#664d03}.api-raw-content h3:not(:first-child){margin-top:20px;padding-top:16px;border-top:1px dashed#ddd}.api-raw-content strong{font-weight:600}.api-code{display:inline-block;min-width:60px}.structured-item{margin-bottom:16px}.nested-list{margin-top:8px;margin-left:24px;list-style-type:none;padding-left:0}.nested-item{margin:8px 0;line-height:1.5;padding-right:8px;text-align:left}.nested-item strong{font-weight:600}.item-content{margin-bottom:4px;font-weight:500}.structured-list{list-style-type:none;padding-left:0}p{margin:8px 0}.sdk-category{font-size:18px;margin-top:16px;margin-bottom:8px;font-weight:500}.sdk-item{margin:8px 0 8px 24px;line-height:1.5}.sdk-conclusion{margin-top:16px;font-style:italic;color:#505050}.documentation-link{margin-top:12px;margin-bottom:10px;text-align:right}.documentation-link a{display:inline-block;padding:6px 12px;background-color:#f5f7fa;border:1px solid#e0e5eb;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;color:#3c4257;font-size:.85rem;font-weight:500;text-decoration:none;-webkit-transition:all.2s ease;-moz-transition:all.2s ease;-o-transition:all.2s ease;transition:all.2s ease}.documentation-link a:hover{background-color:#e9ecf1;border-color:#d0d5dd;color:#0a2540}'})]})}}},function(e){e.O(0,[29,971,117,744],function(){return e(e.s=3934)}),_N_E=e.O()}]);